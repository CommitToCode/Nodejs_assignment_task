<h1 style="font-family: Arial, sans-serif; color: #333; text-align: center; margin-bottom: 30px;">
  <%= product._id ? 'Edit' : 'Add' %> Product
</h1>

<form method="post" style="max-width: 500px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9; font-family: Arial, sans-serif;">

  <div style="margin-bottom: 15px;">
    <label style="display: block; font-weight: bold; margin-bottom: 5px;">Name:</label>
    <input 
      name="name" 
      value="<%= product.name || '' %>" 
      required 
      style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;" 
    />
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; font-weight: bold; margin-bottom: 5px;">Price:</label>
    <input 
      name="price" 
      type="number" 
      step="0.01" 
      value="<%= product.price || '' %>" 
      required 
      style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;" 
    />
  </div>

  <div style="margin-bottom: 15px;">
    <label style="display: block; font-weight: bold; margin-bottom: 5px;">Category:</label>
    <select 
      name="categoryId" 
      onchange="this.form.submit()" 
      required 
      style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
      <option value="">--Select--</option>
      <% categories.forEach(c => { %>
        <option value="<%= c._id %>" <%= product.categoryId == c._id ? 'selected' : '' %>><%= c.name %></option>
      <% }) %>
    </select>
  </div>

  <div style="margin-bottom: 20px;">
    <label style="display: block; font-weight: bold; margin-bottom: 5px;">Subcategory:</label>
    <select 
      name="subcategoryName" 
      required 
      style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
      <option value="">--Select--</option>
      <% if (product.categoryId) {
        const selectedCategory = categories.find(c => c._id.toString() === product.categoryId.toString());
        if (selectedCategory) {
          selectedCategory.subcategories.forEach(sc => { %>
            <option value="<%= sc.name %>" <%= product.subcategoryName === sc.name ? 'selected' : '' %>><%= sc.name %></option>
          <% });
        }
      } %>
    </select>
  </div>

  <div style="text-align: center;">
    <button 
      type="submit" 
      style="padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
      Save
    </button>
  </div>
</form>
